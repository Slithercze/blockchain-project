<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="styles.css"/>
    <title>Document</title>
    <style>
        .genKey:disabled,
        .viewTxBtn:disabled,
        .sendTx:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
<audio id="audio-player">
    <source src="Elevator-music.mp3" type="audio/mpeg">
</audio>
<div class="auth-buttons">
    <button id="login-button" onclick="window.location.href='login.html'">Login</button>
    <button id="register-button" onclick="window.location.href='register.html'">Register</button>
    <span id="username"></span>
    <span id="balance">0</span>

    <button type="button" id="logout-button" onclick="window.location.href = '/logout'" style="display: none">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-square" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"></path>
        </svg>
    </button>
</div>


<div class="page">
    <div class="chain">
        <div class="template block">
            <div class="block-fields">
                <p class="block-data"></p>
                <p>Hash: <span class="hash-value">[hash_value]</span></p>
                <p>Previous Hash: <span class="previousHash-value">[previous_hash_value]</span></p>
                <p>Timestamp: <span class="timestamp-value">[timestamp_value]</span></p>
                <p>Nonce: <span class="nonce-value">[nonce_value]</span></p>
                <button class="blockInfo down"></button>
            </div>
                <div class="transactionField template hide">
                    <p>Hash: <span class="txId"></span></p>
                    <p>Previous Transaction Id: <span class="previousTxId"></span></p>
                    <p>Receiving Public Key: <span class="txToAddress"></span></p>
                    <p>Timestamp: <span class="txTimestamp"></span></p>
                </div>
        </div>
    </div>
    <div class="box">
        <div class="container">
            <h1>Mine blocks</h1>
            <form>
                <p>Generate new Public Key, or use the current one.</p>
                <button type="button" class="genKey">Generate</button>
                <textarea placeholder="Generate your public key..." class="keyInput"></textarea>
                <p class="privKey hide"><strong>Save your Private Key before you mine:</strong><br><span>tady bude private key</span></p>
                <button type="submit">Start Mining</button>
                <div id="logged-out-message">
                    Please log in to generate keys and send transactions.
                </div>
            </form>
            <div class="miner hide">
                <p class="miningStatus"></p>
                <p class="hashesPerSecond"></p>
                <p class="miningTime"></p>
            </div>
        </div>

        <div class="transaction">
            <h1>Create Transaction</h1>
            <form class="formTx">
            <textarea placeholder="Enter previous transaction hash" name="previousTransactionId"
                      class="textInput"></textarea>
                <br>
                <textarea class="" name="toAddress" type="text" placeholder="To Address" id="to"></textarea>
                <br>
                <textarea class="privateKey1" name="privateKey" type="text" placeholder="Your Private key"
                          id="from"></textarea>
                <button type="submit" class="sendTx">Sign and send</button>

                <div id="copy-notification">Hash copied to clipboard!</div>
                <div class="wrapperForDropdown">
                <div id="transactionDropdown" class="dropdown-content">
                    <!-- Transactions will be loaded here -->
                </div>
                </div>
                <button class="viewTxBtn" type="button">View Transactions</button>
                <p class="message"></p>
            </form>
        </div>
    </div>
</div>
<script type="module" src="script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/elliptic/6.5.3/elliptic.min.js"></script>
<script src="keypairgen.js"></script>
<script src="authKeys.js"></script>
</body>
</html>
